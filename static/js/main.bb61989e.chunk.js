(this["webpackJsonpsocial-network"]=this["webpackJsonpsocial-network"]||[]).push([[0],{110:function(e,t,n){"use strict";n.d(t,"b",(function(){return u}));var r=n(34),a=n(9),c=n(296),o="social-network/dialog/SEND_MESSAGE",s={users:[{name:"Andrii",id:1,active:!0},{name:"Alex",id:2},{name:"Ira",id:3},{name:"Vova",id:4},{name:"Anton",id:5}],messages:[{text:"Hi, what's up?",id:1,src:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=750&q=80"},{text:"I'm always good, and you?",id:2,src:"https://images.unsplash.com/flagged/photo-1570612861542-284f4c12e75f?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=750&q=80"},{text:"Fine, thanks. Where are you going?",id:3,src:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=750&q=80"},{text:"To the cinema, do you wanna go with me?",id:4,src:"https://images.unsplash.com/flagged/photo-1570612861542-284f4c12e75f?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=750&q=80"},{text:"Yey, let's go.",id:5,src:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=750&q=80"}]},u=function(e){return{type:o,newMessageBody:e}};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o:var n={text:t.newMessageBody,id:Object(c.a)()};return Object(a.a)({},e,{messages:[].concat(Object(r.a)(e.messages),[n])});default:return e}}},122:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(0),a=n.n(r),c=n(10),o=n(12),s=function(e){return{isAuth:e.auth.isAuth}},u=function(e){return Object(o.b)(s)((function(t){return t.isAuth?a.a.createElement(e,t):a.a.createElement(c.a,{to:"/login"})}))}},13:function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return l}));var r=n(2),a=n.n(r),c=n(6),o=n(137),s=o.create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"b68d2bce-2883-476f-99fa-113beee74d3c"}}),u={getUsers:function(){var e=arguments;return Object(c.a)(a.a.mark((function t(){var n,r,c,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.length>0&&void 0!==e[0]?e[0]:5,r=e.length>1&&void 0!==e[1]?e[1]:1,t.prev=2,t.next=5,s.get("users?count=".concat(n,"&page=").concat(r));case 5:if(200!==(c=t.sent).status){t.next=11;break}return o=c.data,t.abrupt("return",o);case 11:throw new Error(c.status);case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(2),console.error("".concat(t.t0.name,": ").concat(t.t0.message," => ").concat(t.t0.stack));case 17:case"end":return t.stop()}}),t,null,[[2,14]])})))()},follow:function(){var e=arguments;return Object(c.a)(a.a.mark((function t(){var n,r,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.length>0&&void 0!==e[0]?e[0]:1,t.prev=1,t.next=4,s.post("follow/".concat(n));case 4:if(200!==(r=t.sent).status){t.next=10;break}return c=r.data,t.abrupt("return",c);case 10:throw new Error(r.status);case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),console.error("".concat(t.t0.name,": ").concat(t.t0.message," => ").concat(t.t0.stack));case 16:case"end":return t.stop()}}),t,null,[[1,13]])})))()},unfollow:function(){var e=arguments;return Object(c.a)(a.a.mark((function t(){var n,r,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.length>0&&void 0!==e[0]?e[0]:1,t.prev=1,t.next=4,s.delete("follow/".concat(n));case 4:if(200!==(r=t.sent).status){t.next=10;break}return c=r.data,t.abrupt("return",c);case 10:throw new Error(r.status);case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),console.error("".concat(t.t0.name,": ").concat(t.t0.message," => ").concat(t.t0.stack));case 16:case"end":return t.stop()}}),t,null,[[1,13]])})))()}},i={getProfile:function(){var e=arguments;return Object(c.a)(a.a.mark((function t(){var n,r,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.length>0&&void 0!==e[0]?e[0]:1,t.prev=1,t.next=4,s.get("profile/".concat(n));case 4:if(200!==(r=t.sent).status){t.next=10;break}return c=r.data,t.abrupt("return",c);case 10:throw new Error(r.status);case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),console.error("".concat(t.t0.name,": ").concat(t.t0.message," => ").concat(t.t0.stack));case 16:case"end":return t.stop()}}),t,null,[[1,13]])})))()},getStatus:function(){var e=arguments;return Object(c.a)(a.a.mark((function t(){var n,r,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.length>0&&void 0!==e[0]?e[0]:1,t.prev=1,t.next=4,s.get("profile/status/".concat(n));case 4:if(200!==(r=t.sent).status){t.next=10;break}return c=r.data,t.abrupt("return",c);case 10:throw new Error(r.status);case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),console.error("".concat(t.t0.name,": ").concat(t.t0.message," => ").concat(t.t0.stack));case 16:case"end":return t.stop()}}),t,null,[[1,13]])})))()},updateStatus:function(){var e=arguments;return Object(c.a)(a.a.mark((function t(){var n,r,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.length>0&&void 0!==e[0]?e[0]:"",t.prev=1,t.next=4,s.put("profile/status",{status:n});case 4:if(200!==(r=t.sent).status){t.next=10;break}return c=r.data,t.abrupt("return",c);case 10:throw new Error(r.status);case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),console.error("".concat(t.t0.name,": ").concat(t.t0.message," => ").concat(t.t0.stack));case 16:case"end":return t.stop()}}),t,null,[[1,13]])})))()},updatePhoto:function(e){return Object(c.a)(a.a.mark((function t(){var n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=new FormData).append("img",e),t.prev=2,t.next=5,s.put("profile/photo",n,{headers:{"Content-Type":"multipart/form-data"}});case 5:if(200!==(r=t.sent).status){t.next=10;break}return t.abrupt("return",r);case 10:throw new Error(r.status);case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(2),console.error("".concat(t.t0.name,": ").concat(t.t0.message," => ").concat(t.t0.stack));case 16:case"end":return t.stop()}}),t,null,[[2,13]])})))()},updateProfileInfo:function(e){return Object(c.a)(a.a.mark((function t(){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.put("profile",e);case 3:if(200!==(n=t.sent).status){t.next=8;break}return t.abrupt("return",n);case 8:throw new Error(n.status);case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.error("".concat(t.t0.name,": ").concat(t.t0.message," => ").concat(t.t0.stack));case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()}},l={me:function(){return Object(c.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.get("auth/me");case 3:if(200!==(t=e.sent).status){e.next=9;break}return n=t.data,e.abrupt("return",n);case 9:throw new Error(t.status);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error("".concat(e.t0.name,": ").concat(e.t0.message," => ").concat(e.t0.stack));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))()},login:function(e,t){var n=arguments;return Object(c.a)(a.a.mark((function r(){var c,o,u,i;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c=n.length>2&&void 0!==n[2]&&n[2],o=n.length>3?n[3]:void 0,r.prev=2,r.next=5,s.post("auth/login",{email:e,password:t,rememberMe:c,captcha:o});case 5:if(200!==(u=r.sent).status){r.next=11;break}return i=u.data,r.abrupt("return",i);case 11:throw new Error(u.status);case 12:r.next=17;break;case 14:r.prev=14,r.t0=r.catch(2),console.error("".concat(r.t0.name,": ").concat(r.t0.message," => ").concat(r.t0.stack));case 17:case"end":return r.stop()}}),r,null,[[2,14]])})))()},logout:function(){return Object(c.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.delete("auth/login");case 3:if(200!==(t=e.sent).status){e.next=9;break}return n=t.data,e.abrupt("return",n);case 9:throw new Error(t.data);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error("".concat(e.t0.name,": ").concat(e.t0.message," => ").concat(e.t0.stack));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))()},captcha:function(){return Object(c.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.get("security/get-captcha-url");case 3:if(200!==(t=e.sent).status){e.next=9;break}return n=t.data,e.abrupt("return",n);case 9:throw new Error(t.status);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error("".concat(e.t0.name,": ").concat(e.t0.message," => ").concat(e.t0.stack));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))()}}},133:function(e,t,n){"use strict";n.d(t,"f",(function(){return r})),n.d(t,"d",(function(){return a})),n.d(t,"a",(function(){return c})),n.d(t,"e",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return u}));var r=function(e){return e.usersPage.users},a=function(e){return e.usersPage.pageSize},c=function(e){return e.usersPage.currentPage},o=function(e){return e.usersPage.totalUsers},s=function(e){return e.usersPage.isFetching},u=function(e){return e.usersPage.followingInProgress}},141:function(e,t,n){e.exports=n.p+"static/media/loader.db7c38dd.svg"},142:function(e,t,n){e.exports={formControl:"InfoFormStyles_formControl__3z54d",error:"InfoFormStyles_error__2_qnr",formSummeryError:"InfoFormStyles_formSummeryError__3WET5"}},16:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var r=function(e){if(!e)return"This field is required"},a=function(e){return function(t){if(t&&t.length>e)return"This field must have maximum ".concat(e," characters")}}},169:function(e,t,n){e.exports=n(295)},174:function(e,t,n){},18:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return l}));var r=n(33),a=n(0),c=n.n(a),o=n(51),s=n.n(o),u=function(e){var t=e.meta,n=t.touched,r=t.error,a=e.children,o=n&&r;return c.a.createElement("div",{className:s.a.formControl+" "+(o?s.a.error:"")},c.a.createElement("div",null,a),o&&c.a.createElement("span",null,r))},i=function(e){var t=e.input,n=(e.meta,Object(r.a)(e,["input","meta"]));return c.a.createElement(u,e," ",c.a.createElement("textarea",Object.assign({},t,n))," ")},l=function(e){var t=e.input,n=(e.meta,Object(r.a)(e,["input","meta"]));return c.a.createElement(u,e,c.a.createElement("input",Object.assign({},t,n)))}},27:function(e,t,n){"use strict";var r=n(0),a=n.n(r),c=n(97),o=n.n(c),s=n(141),u=n.n(s);t.a=function(){return a.a.createElement("div",{className:o.a.Loader},a.a.createElement("img",{className:o.a.Loader__Img,src:u.a,alt:"loader"}))}},29:function(e,t,n){e.exports={nav:"NavbarStyles_nav__2cb05",nav__listItems:"NavbarStyles_nav__listItems__3Rl-Y",nav__item:"NavbarStyles_nav__item__2gqfS",nav__item_active:"NavbarStyles_nav__item_active__NG5SD"}},294:function(e,t,n){},295:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(63),o=n.n(c),s=(n(174),n(64)),u=n(65),i=n(67),l=n(68),p=n(10),f=n(14),m=n(8),d=n(2),h=n.n(d),_=n(6),b=n(34),v=n(9),g=n(13),E=n(296),w=n(23),y=n(47),O="social-network/profile/ADD_NEW_POST",x="social-network/profile/SET_USER_PROFILE",k="social-network/profile/SET_USER_STATUS",j="social-network/profile/DELETE_POST",S="social-network/profile/UPDATE_PHOTO",I={profile:null,status:"Click to add status",newPostText:"",posts:[]},P=function(e){return{type:k,status:e}},N=function(e){return function(){var t=Object(_.a)(h.a.mark((function t(n){var r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(Object(y.d)(!0)),t.next=3,g.b.getProfile(e);case 3:r=t.sent,n({type:x,profile:r}),n(U(e)),n(Object(y.d)(!1));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},U=function(e){return function(){var t=Object(_.a)(h.a.mark((function t(n){var r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.b.getStatus(e);case 2:r=t.sent,n(P(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:var n={text:t.newPostBody,id:Object(E.a)()};return Object(v.a)({},e,{posts:[].concat(Object(b.a)(e.posts),[n])});case j:return Object(v.a)({},e,{posts:Object(b.a)(e.posts.filter((function(e){return e.id!==t.postID})))});case x:return Object(v.a)({},e,{profile:t.profile});case k:return Object(v.a)({},e,{status:t.status});case S:return Object(v.a)({},e,{profile:Object(v.a)({},e.profile,{photos:t.photos})});default:return e}},A=n(110),C="social-network/auth/SET_USER_DATA",F="social-network/auth/GET_CAPTCHA",T={userId:null,email:null,login:null,isAuth:!1,captchaURL:null},D=function(e,t,n,r){return{type:C,payload:{userId:e,email:t,login:n,isAuth:r}}},M=function(){return function(){var e=Object(_.a)(h.a.mark((function e(t){var n,r,a,c,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.me();case 2:0===(n=e.sent).resultCode&&(r=n.data,a=r.id,c=r.email,o=r.login,t(D(a,c,o,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},R=function(){return function(){var e=Object(_.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.captcha();case 3:n=e.sent,t((r=n.url,{type:F,payload:{captchaURL:r}})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("This request is not success. Captcha has not received");case 10:case"end":return e.stop()}var r}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:case F:return Object(v.a)({},e,{},t.payload);default:return e}},H=n(138),q=n(136),B={initialized:!1},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"social-network/app/INITIALIZED_SUCCESSFULLY":return Object(v.a)({},e,{initialized:!0});default:return e}},W=Object(m.c)({profilePage:L,dialogPage:A.a,usersPage:y.a,auth:G,form:q.a,app:z}),J=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||m.d,Q=Object(m.e)(W,J(Object(m.a)(H.a)));window.__store__=Q;var V=Q,Y=n(12),K=function(e){return e.auth.isAuth},X=function(e){return e.auth.login},Z=function(e){return e.auth.userId},$=n(71),ee=n.n($),te=function(e){var t=e.isAuth,n=e.login,r=e.logout;return a.a.createElement("header",{className:ee.a.header},a.a.createElement(f.b,{to:"/"},a.a.createElement("img",{className:ee.a.header__logo,src:"https://cdn4.iconfinder.com/data/icons/logos-3/600/React.js_logo-512.png",alt:"logo"})),t?a.a.createElement("div",null,a.a.createElement("p",null,n),a.a.createElement("button",{onClick:r},"Log out")):a.a.createElement(f.b,{className:ee.a.header__login,to:"/login"},"Login"))},ne=Object(Y.b)((function(e){return{isAuth:K(e),login:X(e)}}),{logout:function(){return function(){var e=Object(_.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.logout();case 2:0===e.sent.resultCode&&t(D(null,null,null,null));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})((function(e){return a.a.createElement(te,e)})),re=n(29),ae=n.n(re),ce=function(){return a.a.createElement("nav",{className:ae.a.nav},a.a.createElement("ul",{className:ae.a.nav__listItems},a.a.createElement("li",{className:ae.a.nav__item},a.a.createElement(f.b,{to:"/profile"},"Profile")),a.a.createElement("li",{className:ae.a.nav__item},a.a.createElement(f.b,{to:"/dialogs"},"Dialogs")),a.a.createElement("li",{className:ae.a.nav__item},a.a.createElement(f.b,{to:"/users"},"Users")),a.a.createElement("li",{className:ae.a.nav__item},a.a.createElement(f.b,{to:"/news"},"News")),a.a.createElement("li",{className:ae.a.nav__item},a.a.createElement(f.b,{to:"/settings"},"Settings"))))},oe=n(122),se=function(e){return e.profilePage.profile},ue=function(e){return e.profilePage.status},ie=function(e){return e.profilePage.posts},le=n(46),pe=n(27),fe=n(72),me=n.n(fe),de=n(61),he=n.n(de),_e=n(33),be=n(35),ve=n.n(be),ge=function(e){var t=e.contTitle,n=e.contValue;return n?a.a.createElement("li",{className:ve.a.userI__contact},a.a.createElement("a",{href:n,target:"_blank",rel:"noopener noreferrer"},t)):null},Ee=function(e){var t=e.profile,n=Object(_e.a)(e,["profile"]);return a.a.createElement("section",{className:ve.a.userI__data},a.a.createElement("p",{className:ve.a.userI__aboutMe},t.aboutMe),a.a.createElement("h3",{className:ve.a.userI__job},"\u0420\u0430\u0431\u043e\u0442\u0430:",t.lookingForAJob?" \u0432 \u043f\u043e\u0438\u0441\u043a\u0430\u0445":" \u0440\u0430\u0431\u043e\u0442\u0430\u044e"),a.a.createElement("p",{className:ve.a.userI__job_desc},t.lookingForAJob&&t.lookingForAJobDescription),a.a.createElement("h3",null,"Contacts: "),a.a.createElement("ul",{className:ve.a.userI__contacts},t&&Object.keys(t.contacts).map((function(e){return a.a.createElement(ge,{key:e.toString(),contTitle:e,contValue:t.contacts[e]})}))),n.isOwner&&a.a.createElement("button",{onClick:n.editModeHandle},"Update"))},we=n(142),ye=n.n(we),Oe=n(134),xe=n(135),ke=n(18),je=n(16),Se=Object(je.a)(30),Ie=Object(je.a)(150),Pe=Object(je.a)(50),Ne=function(e){return"true"===e||"false"!==e&&e},Ue=Object(xe.a)({form:"infoUpdate"})((function(e){var t=e.handleSubmit,n=e.pristine,r=e.submitting,c=e.reset;return a.a.createElement("form",{onSubmit:t},a.a.createElement("label",null,"Full name:",a.a.createElement(Oe.a,{name:"fullName",component:ke.a,type:"text",require:[je.b,Se]})),a.a.createElement("label",null,"About me:",a.a.createElement(Oe.a,{name:"aboutMe",component:ke.b,type:"text",require:[je.b,Ie],placeholder:"About me..."})),a.a.createElement("label",null,"Are you looking for a job?"),a.a.createElement("div",null,a.a.createElement("label",null,a.a.createElement(Oe.a,{name:"lookingForAJob",component:"input",type:"radio",value:!0,normalize:Ne}),"yes"),a.a.createElement("label",null,a.a.createElement(Oe.a,{name:"lookingForAJob",component:"input",type:"radio",value:!1,normalize:Ne}),"no")),a.a.createElement("label",null,"Your job description.",a.a.createElement(Oe.a,{name:"lookingForAJobDescription",component:ke.a,type:"text",require:[je.b,Pe],placeholder:"I'm looking for..."})),Object.keys(e.profile.contacts).map((function(e){return a.a.createElement("label",{key:e.toString()},e,a.a.createElement(Oe.a,{name:"contacts.".concat(e),component:ke.a,type:"url",placeholder:e}))})),e.error&&e.error.map((function(e){return a.a.createElement("p",{className:ye.a.formSummeryError},e)})),a.a.createElement("button",{type:"submit",disabled:r},"Save"),a.a.createElement("button",{type:"button",disabled:n||r,onClick:c},"Clear Values"))})),Le=n(74),Ae=n.n(Le),Ce=function(e){var t=Object(r.useState)(!1),n=Object(le.a)(t,2),c=n[0],o=n[1],s=Object(r.useState)(e.status),u=Object(le.a)(s,2),i=u[0],l=u[1];Object(r.useEffect)((function(){l(e.status)}),[e.status]);return a.a.createElement("div",{className:Ae.a.Status},c?a.a.createElement("input",{className:Ae.a.Status__input,type:"text",name:"status",value:i,onBlur:function(t){o(!1),e.updateUserStatus(i)},autoFocus:!0,onChange:function(e){var t=e.target.value;l(t)}}):a.a.createElement("h2",{onClick:function(){o(!0)},className:Ae.a.Status__title},i))},Fe=function(e){var t=Object(r.useState)(!1),n=Object(le.a)(t,2),c=n[0],o=n[1];return e.profile?a.a.createElement("section",{className:me.a.userI},a.a.createElement("h1",{className:me.a.userI__name}," ",e.profile.fullName),a.a.createElement("section",null,a.a.createElement("img",{className:me.a.userI__avatar,src:e.profile.photos.large||he.a,alt:"user-avatar"}),e.isOwner&&a.a.createElement("input",{type:"file",onChange:function(t){var n=t.target.files;n.length&&e.updatePhoto(n[0])}})),a.a.createElement(Ce,{status:e.status,updateUserStatus:e.updateUserStatus}),c?a.a.createElement(Ue,{initialValues:e.profile,profile:e.profile,onSubmit:function(t){e.updateProfileInfo(t).then((function(){return o(!1)}))}}):a.a.createElement(Ee,Object.assign({},e,{editModeHandle:function(){return o(!0)}}))):a.a.createElement(pe.a,null)},Te=n(75),De=n.n(Te),Me=function(e){var t=e.text,n=e.userPhoto,r={backgroundImage:"url('".concat(n||he.a,"')")};return a.a.createElement("li",{className:De.a.post},a.a.createElement("div",{className:De.a.post__avatar,style:r}),a.a.createElement("p",{className:De.a.post__text},t))},Re=n(53),Ge=n.n(Re),He=Object(je.a)(50),qe=Object(xe.a)({form:"sendPostForm"})((function(e){return a.a.createElement("form",{className:Ge.a.posts__postForm,onSubmit:e.handleSubmit},a.a.createElement(Oe.a,{className:Ge.a.posts__textArea,component:ke.b,validators:[je.b,He],name:"newPostBody",placeholder:"Your new post...",rows:"5"}),a.a.createElement("button",{className:Ge.a.posts__btn,type:"submit"},"send"))})),Be=function(e){var t=e.posts,n=e.sendPost,r=e.profile;return a.a.createElement("article",{className:Ge.a.posts},a.a.createElement("h2",null,"My Posts"),a.a.createElement("ul",null,t.length>0&&t.map((function(e){return a.a.createElement(Me,Object.assign({key:e.id},e,{userPhoto:r.photos.small}))}))),a.a.createElement(qe,{onSubmit:function(e){n(e.newPostBody),Object(w.a)("sendPostForm")}}))},ze=n(76),We=n.n(ze),Je=function(e){return a.a.createElement("main",{className:We.a.profile},a.a.createElement("article",{className:We.a.profile__slider},a.a.createElement("img",{className:We.a.profile__img,src:"https://images.unsplash.com/photo-1542831371-29b0f74f9713?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=750&q=80",alt:"slider"})),a.a.createElement(Fe,e),a.a.createElement(Be,e))},Qe=n(133),Ve=function(e){Object(l.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).refreshProfile=function(){var t=e.props.match.params.userId||e.props.authorizedUserId||e.props.history.push("/login");e.props.setUserProfile(t),e.props.getUserStatus(t)},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return a.a.createElement(a.a.Fragment,null,this.props.isFetching?a.a.createElement(pe.a,null):a.a.createElement(Je,Object.assign({},this.props,{isOwner:!this.props.match.params.userId})))}}]),n}(a.a.Component),Ye=Object(m.d)(p.g,oe.a,Object(Y.b)((function(e){return{profile:se(e),status:ue(e),isAuth:K(e),isFetching:Object(Qe.c)(e),authorizedUserId:Z(e),posts:ie(e)}}),{setUserProfile:N,getUserStatus:U,updateUserStatus:function(e){return function(){var t=Object(_.a)(h.a.mark((function t(n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.b.updateStatus(e);case 2:0===t.sent.resultCode&&n(P(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},sendPost:function(e){return{type:O,newPostBody:e}},updatePhoto:function(e){return function(){var t=Object(_.a)(h.a.mark((function t(n){var r,a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.b.updatePhoto(e);case 3:if(r=t.sent,0!==(a=r.data).resultCode){t.next=9;break}n((c=a.data.photos,{type:S,photos:c})),t.next=10;break;case 9:throw new Error(a.messages);case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),console.error("The request is not success: ",t.t0);case 15:case"end":return t.stop()}var c}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()},updateProfileInfo:function(e){return function(){var t=Object(_.a)(h.a.mark((function t(n,r){var a,c,o;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.b.updateProfileInfo(e);case 3:if(a=t.sent,0!==(c=a.data).resultCode){t.next=9;break}n(N(e.userId)),t.next=12;break;case 9:return o=c.messages.length>0?c.messages:"Some error occurred",n(Object(w.b)("infoUpdate",{_error:o})),t.abrupt("return",Promise.reject(o));case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),console.error("The request is not success: ",t.t0);case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e,n){return t.apply(this,arguments)}}()}}))(Ve),Ke=function(){return a.a.createElement("h1",null,"News")},Xe=function(){return a.a.createElement("h1",null,"Settings")},Ze=n(51),$e=n.n(Ze),et=Object(xe.a)({form:"login"})((function(e){var t=e.captchaURL,n=Object(_e.a)(e,["captchaURL"]);return a.a.createElement("form",{onSubmit:n.handleSubmit},a.a.createElement("div",null,a.a.createElement(Oe.a,{component:ke.a,validate:[je.b],type:"email",name:"email",placeholder:"login"})),a.a.createElement("div",null,a.a.createElement(Oe.a,{component:ke.a,validate:[je.b],type:"password",name:"password",placeholder:"password"})),a.a.createElement("div",null,a.a.createElement(Oe.a,{component:ke.a,type:"checkbox",name:"rememberMe"})," remember me"),n.error&&n.error.map((function(e){return a.a.createElement("p",{className:$e.a.formSummeryError,key:e.toString()},e)})),t&&a.a.createElement("div",null,a.a.createElement("img",{src:t,alt:"captcha"}),a.a.createElement(Oe.a,{component:ke.a,type:"text",name:"captcha",placeholder:"Symbols from captcha"})),a.a.createElement("button",{type:"submit"},"LOGIN"))})),tt=Object(Y.b)((function(e){return{isAuth:K(e),captchaURL:(t=e,t.auth.captchaURL)};var t}),{login:function(e,t,n,r){return function(){var a=Object(_.a)(h.a.mark((function a(c){var o,s;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,g.a.login(e,t,n,r);case 2:0===(o=a.sent).resultCode?(c(M()),c(Object(w.a)("login"))):(10===o.resultCode&&c(R()),s=o.messages.length>0?o.messages:"Some error occurred",c(Object(w.b)("login",{_error:s})));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}})((function(e){return e.isAuth?a.a.createElement(p.a,{to:"/profile"}):a.a.createElement("div",null,a.a.createElement("h1",null,"LOGIN"),a.a.createElement(et,{onSubmit:function(t){var n=t.email,r=t.password,a=t.rememberMe,c=t.captcha,o=void 0===c?null:c;e.login(n,r,a,o)},captchaURL:e.captchaURL}))})),nt=function(){return a.a.createElement("div",null,a.a.createElement("h1",null,"404"),a.a.createElement("h2",null,"Page Not Found"))},rt=(n(294),a.a.lazy((function(){return n.e(3).then(n.bind(null,305))}))),at=a.a.lazy((function(){return n.e(4).then(n.bind(null,304))})),ct=function(e){Object(l.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).catchAllUnhandledErrors=function(e){console.error(e)},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp(),window.addEventListener("unhandledrejection",this.catchAllUnhandledErrors)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("unhandledrejection",this.catchAllUnhandledErrors)}},{key:"render",value:function(){return this.props.initialized?a.a.createElement("div",{className:"App"},a.a.createElement(ne,null),a.a.createElement(ce,null),a.a.createElement(p.d,null,a.a.createElement(p.b,{path:"/dialogs",render:function(){return a.a.createElement(r.Suspense,{fallback:a.a.createElement(pe.a,null)},a.a.createElement(at,null))}}),a.a.createElement(p.b,{path:"/news",render:function(){return a.a.createElement(Ke,null)}}),a.a.createElement(p.b,{path:"/settings",render:function(){return a.a.createElement(Xe,null)}}),a.a.createElement(p.b,{path:"/users",render:function(){return a.a.createElement(r.Suspense,{fallback:a.a.createElement(pe.a,null)},a.a.createElement(rt,null))}}),a.a.createElement(p.b,{path:"/login",render:function(){return a.a.createElement(tt,null)}}),a.a.createElement(p.b,{path:"/profile/:userId?",render:function(){return a.a.createElement(Ye,null)}}),a.a.createElement(p.b,{path:"/",render:function(){return a.a.createElement(Ye,null)}}),a.a.createElement(p.b,{path:"*",component:nt}))):a.a.createElement(pe.a,null)}}]),n}(a.a.Component),ot=Object(m.d)(p.g,Object(Y.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(){var e=Object(_.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(M());case 2:t({type:"social-network/app/INITIALIZED_SUCCESSFULLY"});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}))(ct),st=function(){return a.a.createElement(f.a,null,a.a.createElement(Y.a,{store:V},a.a.createElement(ot,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(st,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},35:function(e,t,n){},47:function(e,t,n){"use strict";n.d(t,"d",(function(){return g})),n.d(t,"c",(function(){return w})),n.d(t,"e",(function(){return O})),n.d(t,"b",(function(){return x}));var r=n(2),a=n.n(r),c=n(6),o=n(34),s=n(9),u=n(13),i=function(e,t,n,r){return e.map((function(e){return e[n]===t?Object(s.a)({},e,{},r):e}))},l="social-network/users/FOLLOWED",p="social-network/users/UNFOLLOWED",f="social-network/users/SET_USERS",m="social-network/users/SET_TOTAL_USERS",d="social-network/users/TOGGLE_IS_FETCHING",h={users:[],pageSize:10,currentPage:1,totalUsers:0,isFetching:!1,followingInProgress:[]},_=function(e){return{type:l,userId:e}},b=function(e){return{type:p,userId:e}},v=function(e){return{type:"social-network/users/CHANGE_PAGE",page:e}},g=function(e){return{type:d,isFetching:e}},E=function(e,t){return{type:"social-network/users/TOGGLE_IS_FOLLOW_IN_PROGRESS",isFetching:e,userId:t}},w=function(e,t){return function(){var n=Object(c.a)(a.a.mark((function n(r){var c;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(g(!0)),r(v(t)),n.next=4,u.c.getUsers(e,t);case 4:c=n.sent,r(g(!1)),r((o=c.items,{type:f,users:o})),r((a=c.totalCount,{type:m,totalCount:a}));case 8:case"end":return n.stop()}var a,o}),n)})));return function(e){return n.apply(this,arguments)}}()},y=function(){var e=Object(c.a)(a.a.mark((function e(t,n,r,c){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(E(!0,n)),e.next=3,r(n);case 3:0===e.sent.resultCode&&t(c(n)),t(E(!1,n));case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),O=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=u.c.unfollow.bind(e),y(n,e,r,b);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},x=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=u.c.follow.bind(e),y(n,e,r,_);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return Object(s.a)({},e,{users:i(e.users,t.userId,"id",{followed:!0})});case p:return Object(s.a)({},e,{users:i(e.users,t.userId,"id",{followed:!1})});case f:return Object(s.a)({},e,{users:t.users});case m:return Object(s.a)({},e,{totalUsers:t.totalCount});case"social-network/users/CHANGE_PAGE":return Object(s.a)({},e,{currentPage:t.page});case d:return Object(s.a)({},e,{isFetching:t.isFetching});case"social-network/users/TOGGLE_IS_FOLLOW_IN_PROGRESS":return Object(s.a)({},e,{followingInProgress:t.isFetching?[].concat(Object(o.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});default:return e}}},51:function(e,t,n){e.exports={formControl:"FormControlsStyles_formControl__VvvGI",error:"FormControlsStyles_error__1WIxe",formSummeryError:"FormControlsStyles_formSummeryError__2wJig"}},53:function(e,t,n){e.exports={posts:"PostsListStyles_posts__9hNMV",posts__postForm:"PostsListStyles_posts__postForm__3EQ17",posts__textArea:"PostsListStyles_posts__textArea__2L12w",posts__btn:"PostsListStyles_posts__btn__1PLdQ"}},61:function(e,t,n){e.exports=n.p+"static/media/user-avatar.cd40c797.png"},71:function(e,t,n){e.exports={header:"HeaderStyles_header__2Bjjz",header__logo:"HeaderStyles_header__logo__3hNsK",header__login:"HeaderStyles_header__login__1fLgd",header__login__hover:"HeaderStyles_header__login__hover__3gd82"}},72:function(e,t,n){e.exports={userI:"UserStyles_userI__2BqlY",userI__avatar:"UserStyles_userI__avatar__iBLOx",userI__data:"UserStyles_userI__data__1qcqU",userI__name:"UserStyles_userI__name__3FTZ1",userI__contacts:"UserStyles_userI__contacts__3jgeM",userI__contact:"UserStyles_userI__contact__2dC5H",userI__info:"UserStyles_userI__info__28k7e"}},74:function(e,t,n){},75:function(e,t,n){e.exports={post:"PostStyles_post__2Ukfv",post__avatar:"PostStyles_post__avatar__kY5Mb",post__text:"PostStyles_post__text__2Q-Xc"}},76:function(e,t,n){e.exports={profile__slider:"ProfileStyles_profile__slider__uc3fw",profile__img:"ProfileStyles_profile__img__2h35o"}},97:function(e,t,n){e.exports={Loader:"LoaderStyles_Loader__mrKU1",Loader__Img:"LoaderStyles_Loader__Img__2erVT"}}},[[169,1,2]]]);
//# sourceMappingURL=main.bb61989e.chunk.js.map